name: Create new EC2 instance
hosts: localhost
connection: localhost

tasks:
  - name: Launch EC2 instance
    ec2:
      instance_type: t2.micro
      image: ami-0f9fc25dd2506cf6d
      region: us-east-1
      key_name: devops
      vpc_subnet_id: subnet-0b3a3484e3e176e14
      assign_public_ip: yes
      wait: yes
      count: 1
      aws_access_key: "{{access_key}}"
      aws_secret_key: "{{secret_key}}"
      security_token: "{{session_token}}"